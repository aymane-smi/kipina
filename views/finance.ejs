<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
     <link href='../styles/nav.css' rel='stylesheet'>
     <link href='../styles/finance.css' rel='stylesheet'>
     <link rel="stylesheet" href="https://cdn.rawgit.com/mfd/09b70eb47474836f25a21660282ce0fd/raw/e06a670afcb2b861ed2ac4a1ef752d062ef6b46b/Gilroy.css">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js" integrity="sha512-Wt1bJGtlnMtGP0dqNFH1xlkLBNpEodaiQ8ZN5JLA5wpc1sUlk/O5uuOMNgvzddzkpvZ9GLyYNa8w2s7rqiTk5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   </head>
<body>
  <div class="logo-details">
    <img src="/img/Logo.png">
  </div>
  <div class="sidebar close">
    <ul class="nav-links">
      <li class="li-h">
        <a href="/dashboard" style="margin-left: 20px;" title="accueil">
          <img src="/img/icons/acceuil.png" alt="acceuil">
        </a>
      </li>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/modification" style="margin-left: 20px; margin-top:50px;" title="modification">
          <img src="/img/icons/etudiant.png">
        </a>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/rapport" style="margin-left: 20px; margin-top:50px;" title="rapport">
          <img src="/img/icons/rapport.png">
        </a>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/finance" style="margin-left: 20px; margin-top:50px;" title="finance">
          <img src="/img/icons/finance.png">
        </a>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/english-after-school" style="margin-left: 25px; margin-top:50px;" title="english after school">
          <img src="/img/icons/english-after-school.png">
        </a>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/camps" style="margin-left: 25px; margin-top:50px;" title="camps">
          <img src="/img/icons/camp.png">
        </a>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/add-user" style="margin-left: 25px; margin-top:50px;" title="ajouter utilisateur">
          <i class="fas fa-user-plus" style="color: white;"></i>
        </a>
      </li>
      <%}%>
      <%if(user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/add-kipina" style="margin-left: 25px; margin-top:50px;" title="ajouter kipina">
          <i class="fal fa-plus-square" style="color: white; font-size:33px;"></i>
        </a>
      </li>
      <%}%>
      <%if(user.role == 'educatrice'){%>
      <li class="li-h">
        <a href="/dashboard/competence" style="margin-left: 25px; margin-top:50px;" title="ajouter compétence">
          <i class="fal fa-tasks" style="color: white; font-size:33px;"></i>
        </a>
      </li>
      <%}%>
      <%if(user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/users" style="margin-left: 20px; margin-top:50px;" title="liste des utilisateurs">
          <i class="fal fa-users" style="color: white; font-size:33px;"></i>
        </a>
      </li>
      <%}%>
      <%if(user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/kipinas" style="margin-left: 20px; margin-top:50px;" title="liste des kipinas">
          <i class="fal fa-hospitals" style="color: white; font-size:33px;"></i>
        </a>
      </li>
      <%}%>
      <%if(user.role == 'educatrice'){%>
      <li class="li-h">
        <a href="/dashboard/plan" style="margin-left: 25px; margin-top:50px;" title="ajouter un plan">
          <i class="fal fa-calendar" style="color: white; font-size:33px;"></i>
        </a>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h">
        <a href="/dashboard/list-plan" style="margin-left: 25px; margin-top:50px;"title="liste des plans">
          <i class="fal fa-calendar-check" style="color: white; font-size:33px;"></i>
        </a>
      </li>
      <li>
        <%}%>
        <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
        <a href="/dashboard/list-competence" style="margin-left: 25px; margin-top:50px;" title="liste des compétences">
          <i class="fal fa-list" style="color: white; font-size:33px;"></i>
        </a>
      </li>
      <%}%>
    </ul>
  </div>

<!--
container content
-->
  <section class="home-content" >
    <div style="margin-top: 30px; margin-left: 20px;">
      <div class="row">
        <div class="col-lg-7 col-sm-12 text-nowarp flex-nowrap" style="display: flex; align-items: center;">
          <div style="flex-shrink:0;display:inline-block; width: 70px; height: 70px; border-radius: 50%;position: relative;background: linear-gradient(-30deg, #839000, #BCCF00);">
            <img class="rounded-circle" src="../img/avatar.png" style="width: 66px;height: 66px; position: absolute; top: -10px; left: 2px;">
          </div>
          <div style="margin-left: 30px;flex-shrink:0">
              <span class="bjr1-span ">Bonjour </span>
              <span class="bjr2-spanp">,<%=user.username%></span>
          </div>
        </div>
        <div class="col-lg col-sm-12">
          <div class="row">
            <div class="col-sm-12 col-lg-6" style="margin-top: 10px;">
              <div class="input-group rounded-pill search shadow" style="background: white; overflow: hidden; border: 0 none; width: 300px; display: inline-block; height: 50px;flex-shrink:0" >
                <div class="input-group-prepend border-0">
                  <button  type="button" id="search-button" style="margin-left: 10px; margin-top: 18px;background: url(../img/icons/search-icon.png) no-repeat center/70%;"class="btn search-enfant"></button>
                  <input type="search" placeholder="search" id="search-input"style="margin-left: 10px; margin-top: 10px;" class="border-0">
                </div>
              </div>
            </div>
            <div class="col-sm12 col-lg" style="display: flex; margin-top: 25px; margin-left:30px;">
              <!-- <div class="col-1" style="flex: 1; flex-grow: 0; flex-shrink:0">
                <img src="../img/icons/notification.png" id="notification-image">
              </div> -->
              <div class="col-1" style="flex: 1; margin-left: 14px; flex-grow: 0;flex-shrink:0;margin-top:-4px;">
                <a href="/dashboard/settings">
                  <img src="../img/icons/settings.png" id="settings-image">
                </a>
              </div>
              <div class="col-1" style="flex: 1; margin-left: 14px; flex-grow: 0;flex-shrink:0">
                <form action="/logout" method="post">
                  <button style="border: none; background: none;">
                    <img src="../img/icons/logout.png">
                  </button>
                </form>
              </div>
            </div>
          </div>
          </div>
        </div> 
      </div>
    <div class="ml-4 mt-5 row-chart">
        <div>
          <%if(user.role == 'directrice'){%>
          <div class="doughnut card card-chart">
            <div class="text-center big-font">Genre</div>
            <canvas id="chart1">
            </canvas>
        </div>
        <%}%>
          <a id="button-chart" href="/dashboard/finance/facture">Générer une facture</a>
          <a id="button-chart" href="/dashboard/finance/gestion" style="display:block;">gestion des Payés/Impayés</a>
        </div>
        <%if(user.role == 'directrice'){%>
        <div class="bar1 card card-chart">
          <div class="text-center big-font">Inscription par mois</div>
            <canvas id="chart2"></canvas>
        </div>
        <%}%>
    </div>
    <%if(user.role == 'directrice'){%>
    <div class="row-chart" style="margin-top: 90px;">
        <div>
          <div class="bar card card-chart">
            <div class="text-center big-font">Payé,Impayé par classe</div>
              <canvas id="chart3">
              </canvas>
          </div>
        </div>
        <div style="margin-top: 20px;">
          <div class="bar card card-chart">
            <div class="text-center big-font">desinscription par mois</div>
              <canvas id="chart4">
              </canvas>
          </div>
        </div>
    </div>
    <%}%>
  </section>
  <script type="text/javascript">
    const ctx = document.getElementById('chart1').getContext('2d'),
      ctx1 = document.getElementById('chart2').getContext('2d'),
      ctx2 =   document.getElementById('chart3').getContext('2d');
      ctx3 =   document.getElementById('chart4').getContext('2d');
    let len = <%=nbr_classe%>, x = [], y=[], nbr_classe = [];
    for(let i=0;i<len;i++){
      nbr_classe.push("classe "+(i+1));
      x.push('rgba(229, 0, 91, 0.5)'),
      y.push('rgba(0, 161, 221, 0.5)')
    } 
let myChart1 = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['fille', 'garçon'],
        datasets: [{
            data: [<%=fille%>, <%=garcon%>],
            backgroundColor: [
                'rgb(229, 0, 91)',
                'rgb(0, 161, 221)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
            ],
            borderWidth: 1.2
        }]
    },
});
let myChart2 = new Chart(ctx1, {
    type: 'bar',
    data: {
        labels: ['janvier', 'février', 'mars', 'avril', 'mai', 'juin', 'juillet', 'aout', 'septembre', 'octobre', 'novembre', 'décembre'],
        datasets: [{
            label:"",
            data: [<%-inscription%>],
            backgroundColor: [
                'rgba(255, 99, 132, 0.5)',
                'rgba(255, 159, 64, 0.5)',
                'rgba(255, 205, 86, 0.5)',
                'rgba(75, 192, 192, 0.5)',
                'rgba(54, 162, 235, 0.5)',
                'rgba(153, 102, 255, 0.5)',
                'rgba(201, 203, 207, 0.5)'
            ],
            borderWidth: 1.2
        }]
    }
});
let myChart3 = new Chart(ctx2, {
    type: 'bar',
    data: {
        labels: nbr_classe,
        datasets: [{
          label: "paye",
            data: [<%-paye%>],
            backgroundColor: y,
            borderWidth: 1.2
        },
        {
          label: "impaye",
          data: [<%-impaye%>],
            backgroundColor: x,
            borderWidth: 1.2
        }]
    }
});
let myChart4 = new Chart(ctx3, {
    type: 'bar',
    data: {
        labels: ['janvier', 'février', 'mars', 'avril', 'mai', 'juin', 'juillet', 'aout', 'septembre', 'octobre', 'novembre', 'décembre'],
        datasets: [{
            label: "",
            data: [<%-dinscription%>],
            backgroundColor: [
                'rgba(255, 99, 132, 0.5)',
                'rgba(255, 159, 64, 0.5)',
                'rgba(255, 205, 86, 0.5)',
                'rgba(75, 192, 192, 0.5)',
                'rgba(54, 162, 235, 0.5)',
                'rgba(153, 102, 255, 0.5)',
                'rgba(201, 203, 207, 0.5)'
            ],
            borderWidth: 1.2
        }]
    }
});
  </script>
  <script src="/scripts/dashboard.js"></script>
</body>
</html>