<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link href="/styles/rapport.css" rel="stylesheet">
     <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
     <link href='/styles/nav.css' rel='stylesheet'>
     <link rel="stylesheet" href="https://cdn.rawgit.com/mfd/09b70eb47474836f25a21660282ce0fd/raw/e06a670afcb2b861ed2ac4a1ef752d062ef6b46b/Gilroy.css">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   </head>
<body>
  <div class="logo-details">
    <img src="/img/Logo.png">
  </div>
  <div class="sidebar close">
    <ul class="nav-links">
      <li class="li-h" title="accueil">
        <a href="/dashboard" style="margin-left: 20px;" title="accueil">
          <img src="/img/icons/acceuil.png" alt="acceuil">
        </a>
        <p class="title">Accueil</p>
      </li>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h" title="modification">
        <a href="/dashboard/modification" style="margin-left: 20px; margin-top:50px;" >
          <img src="/img/icons/etudiant.png">
        </a>
        <p class="title" style="margin-left: 7px;">Modification</p>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h" title="rapport">
        <a href="/dashboard/rapport" style="margin-left: 20px; margin-top:50px;" title="rapport">
          <img src="/img/icons/rapport.png">
        </a>
        <p class="title">Rapport</p>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h" title="finance">
        <a href="/dashboard/finance" style="margin-left: 20px; margin-top:50px;" title="finance">
          <img src="/img/icons/finance.png">
        </a>
        <p class="title">Finance</p>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h" title="english after school">
        <a href="/dashboard/english-after-school" style="margin-left: 25px; margin-top:50px;" title="english after school">
          <img src="/img/icons/english-after-school.png">
        </a>
        <p class="title" style="margin-left:24px;">E.A.S</p>
        <!-- style="margin-left: 22px;">English <span style="margin-left: 5px;">after</span><br>school -->
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h" title="camps">
        <a href="/dashboard/camps" style="margin-left: 25px; margin-top:50px;" title="camps">
          <img src="/img/icons/camp.png">
        </a>
        <p class="title" style="margin-left: 20px;">Camps</p>
      </li>
      <%}%>
      <%if(user.role == 'educatrice'){%>
      <li class="li-h"  title="ajouter compétence">
        <a href="/dashboard/competence" style="margin-left: 25px; margin-top:50px;" title="ajouter compétence">
          <img src="/img/icons/competence.png">
        </a>
        <p class="title"><span style="margin-left: 5px;">Ajouter</span><br><span style="margin-left: -8px;">compétence</span></p>
      </li>
      <%}%>
      <%if(user.role == 'educatrice'){%>
      <li class="li-h" title="ajouter routine">
        <a href="/dashboard/routine" style="margin-left: 25px; margin-top:50px;" title="ajouter routine">
          <img src="/img/icons/routine.png">
        </a>
        <p class="title"><span style="margin-left: 2px;">Ajouter</span><br><span style="margin-left: 2px;">routine</span></p>
      </li>
      <%}%>
      <%if(user.role == 'directrice'){%>
      <li class="li-h" title="liste utilisateurs">
        <a href="/dashboard/users" style="margin-left: 20px; margin-top:50px;" title="liste des utilisateurs">
          <img src="/img/icons/gestion-users.png" style="width: 35px; margin-left: 5px;">
        </a>
        <p class="title"><span style="margin-left: 11px;">Liste</span><br><span>utilisateurs</span></p>
      </li>
      <%}%>
      <%if(user.role == 'directrice'){%>
      <li class="li-h" title="Kipinas">
        <a href="/dashboard/kipinas" style="margin-left: 20px; margin-top:50px;" title="Kipinas">
          <img src="/img/icons/kipinas.png" style="margin-left: 4px; width: 40px;">
        </a>
        <p class="title"><span style="margin-left: 5px;">kipinas</p>
      </li>
      <%}%>
      <%if(user.role == 'educatrice'){%>
      <li class="li-h" title="ajouter un plan">
        <a href="/dashboard/plan" style="margin-left: 25px; margin-top:50px;" title="ajouter un plan">
          <img src="/img/icons/plan.png" style="margin-left: -4px;">
        </a>
        <p class="title"><span style="margin-left: 2px;">Ajouter</span><br><span style="margin-left: 8px;">plan</span></p>
      </li>
      <%}%>
      <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
      <li class="li-h" title="liste des plans">
        <a href="/dashboard/list-plan" style="margin-left: 25px; margin-top:50px;" title="liste des plans">
          <img src="/img/icons/liste-plans.png" style="width: 40px; margin-left:-3px;">
        </a>
        <p class="title" style="margin-left:24px;"><span style="margin-left: 2px;">Liste</span><br><span style="margin-left:4px;">des</span><br><span style="margin-left: 2px;">plans</span></p>
      </li>
      <%}%>
      <li class="li-h" title="liste des compétences">
        <%if(user.role == 'administrateur' || user.role == 'directrice'){%>
        <a href="/dashboard/list-competence" style="margin-left: 25px; margin-top:50px;" title="liste des compétences">
          <img src="/img/icons/liste-competences.png" style="width: 40px; margin-left:-3px;">
        </a>
        <p class="title" style="margin-left:24px;"><span style="margin-left: 2px;">Liste</span><br><span style="margin-left:4px;">des</span><br><span style="margin-left: -15px;">compétences</span></p>
      </li>
      <%}%>
    </ul>
  </div>

<!--
container content
-->
  <section class="home-content" >
    <div style="margin-top: 30px; margin-left: 20px;">
      <div class="row">
        <div class="col-lg-7 col-sm-12 text-nowarp flex-nowrap" style="display: flex; align-items: center;">
          <div style="flex-shrink:0;display:inline-block; width: 70px; height: 70px; border-radius: 50%;position: relative;background: linear-gradient(-30deg, #839000, #BCCF00);">
            <img class="rounded-circle" src="/img/avatar.png" style="width: 66px;height: 66px; position: absolute; top: -10px; left: 2px;">
          </div>
          <div style="margin-left: 30px;flex-shrink:0">
              <span class="bjr1-span ">Bonjour</span>
              <span class="bjr2-span">, <%=user.nom%></span>
          </div>
        </div>
        <div class="col-lg col-sm-12">
          <div class="row">
            <div class="col-sm-12 col-lg-6" style="margin-top: 10px;">
              <div class="input-group rounded-pill search shadow" style="background: white; overflow: hidden; border: 0 none; width: 300px; display: inline-block; height: 50px;flex-shrink:0" >
                <div class="input-group-prepend border-0">
                  <button  type="button" id="search-button" style="margin-left: 10px; margin-top: 18px;background: url(/img/icons/search-icon.png) no-repeat center/70%;"class="btn search-enfant"></button>
                  <input type="search" placeholder="search" id="search-input"style="margin-left: 10px; margin-top: 10px;" class="border-0">
                </div>
              </div>
            </div>
            <div class="col-sm12 col-lg" style="display: flex; margin-top: 25px; margin-left:30px;">
              <!-- <div class="col-1" style="flex: 1; flex-grow: 0; flex-shrink:0">
                <img src="../img/icons/notification.png" id="notification-image">
              </div> -->
              <div class="col-1" style="flex: 1; margin-left: 14px; flex-grow: 0;flex-shrink:0;margin-top:-4px;">
                <a href="/dashboard/settings">
                  <img src="/img/icons/settings.png" id="settings-image">
                </a>
              </div>
              <div class="col-1" style="flex: 1; margin-left: -30px; flex-grow: 0;flex-shrink:0;margin-top:-21px;">
                <form action="/logout" method="post">
                  <button style="border: none; background: none;">
                    <img src="/img/icons/logout.png">
                  </button>
                </form>
              </div>
            </div>
          </div>
          </div>
        </div> 
      </div>

    <div class="big-container-rapport">
      <h3 class="title-rapport">Camps Actuel</h3>
      <a href="/dashboard/add-camps" class="add-camp-button">
        Créer Un Camp
      </a>
      <div class="inner-container-camps">

        <%for(let i=0;i<camps.length;i++){%>
        <div class="medium-container-camps">
          <div class="element-camp">
                <a href="/dashboard/camps/<%=camps[i]._id%>">
                    <%if(camps[i].type_camp == 1){%>
                      <img src="/img/Camps/automne.png" alt="automne-logo" />
                    <%}%>
                    <%if(camps[i].type_camp == 2){%>
                      <img src="/img/Camps/cold.png" alt="hiver-logo" />
                    <%}%>
                    <%if(camps[i].type_camp == 3){%>
                      <img src="/img/Camps/print.png" alt="printemps-logo" />
                    <%}%>
                    <%if(camps[i].type_camp == 4){%>
                      <img src="/img/Camps/summer.png" alt="ete-logo" />
                    <%}%>
                    <p><%=camps[i].nom%></p>
                </a>
          </div>
          <div class="time-remaining">
              <div class="progress-bar-loading">
                  <div class="back-loading">
                    <div class="front-loading" style="width: 90%;"></div>
                  </div>
              </div>
              <div class="text-time"> 3 semaines</div>
          </div> 
        </div>
        <%}%>



      <!-- 
        <div class="avatar-group">
            <div class="">
                <img src="/img/avatar.png" alt="profile" class="avatar-element">
            </div>
            <div class="">
              <img src="/img/avatar.png" alt="profile" class="avatar-element trans-avatar">
          </div>
          <div class="">
              <img src="/img/avatar.png" alt="profile" class="avatar-element trans-avatar2">
          </div>
          
        </div> 
        <div class="time-remaining">
            <div class="progress-bar-loading">
                <div class="back-loading"></div>
                <div class="front-loading" style="width: 20%;"></div>
            </div>
            <div class="text-time"> 3 semaines</div>
        </div> 
    </div>

    <div class="medium-container-camps">
        <div class="element-camp">
              <a href="/dashboard/rapport-cantine">
                  <img src="/img/Camps/cold.png   " alt="cold-logo" />
                  <p>Nom Camp</p>
              </a>
        </div>
        <div class="avatar-group">
            <div class="">
                <img src="/img/avatar.png" alt="profile" class="avatar-element">
            </div>
            <div class="">
              <img src="/img/avatar.png" alt="profile" class="avatar-element trans-avatar">
          </div>
          
        </div> 
        <div class="time-remaining">
            <div class="progress-bar-loading">
                <div class="back-loading"></div>
                <div class="front-loading" style="width: 20%;"></div>
            </div>
            <div class="text-time"> 3 semaines</div>
        </div> 
    </div>





    <div class="medium-container-camps">
        <div class="element-camp">
              <a href="/dashboard/rapport-cantine">
                  <img src="/img/Camps/cold.png   " alt="cold-logo" />
                  <p>Nom Camp</p>
              </a>
        </div>
        <div class="avatar-group">
            <div class="">
                <img src="/img/avatar.png" alt="profile" class="avatar-element">
            </div>
          
        </div> 
        <div class="time-remaining">
            <div class="progress-bar-loading">
                <div class="back-loading"></div>
                <div class="front-loading" style="width: 20%;"></div>
            </div>
            <div class="text-time"> 3 semaines</div>
        </div> 
    </div>




     <div class="medium-container-camps">
        <div class="element-camp">
              <a href="/dashboard/rapport-cantine">
                  <img src="/img/Camps/cold.png   " alt="cold-logo" />
                  <p>Nom Camp</p>
              </a>
        </div>
 -->




    </div>
    </div>
    </section>
    <script src="/scripts/dashboard.js" type="text/javascript"></script>
    <script>
      const progress = document.querySelectorAll(".front-loading");
      const text = document.querySelectorAll(".text-time");
      let current, tmp;
      let i=0;
        <%for(let i=0;i<camps.length;i++){%>
          current = moment(new Date());
        if(<%=camps[i].nbr_jrs%>-current.diff(tmp, 'days')>0){
        tmp  = moment("<%=camps[i].date_creation%>");
        progress[<%=i%>].style.width = (100*current.diff(tmp, 'days')/<%=camps[i].nbr_jrs%>)+"%";
        current = moment(new Date());
              tmp     = moment("<%=camps[i].date_creation%>");
        text[<%=i%>].innerText = (<%=camps[i].nbr_jrs%>-current.diff(tmp, 'days'))+" jours restants";
        console.log(<%=camps[i].nbr_jrs%>-current.diff(tmp, 'days'));
        if(<%=camps[i].nbr_jrs%>-current.diff(tmp, 'days') <= 0){
          text[<%=i%>].style.display = "none";
          progress[<%=i%>].parentNode.style.display = "none";
        }
      }else{
        progress[<%=i%>].style.width = "100%";
        text[<%=i%>].innerText = "0 jour";
      }
        <%}%>
    </script>
  </body>
</html>
